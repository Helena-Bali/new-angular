{"ast":null,"code":"import { FormControl, Validators } from '@angular/forms';\nimport { map, startWith } from 'rxjs/operators';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../pek.service\";\nimport * as i2 from \"../sdek.service\";\nimport * as i3 from \"@angular/forms\";\nimport * as i4 from \"../product.service\";\nimport * as i5 from \"@angular/common\";\nimport * as i6 from \"@angular/material/checkbox\";\nimport * as i7 from \"@angular/material/autocomplete\";\nimport * as i8 from \"@angular/material/core\";\nimport * as i9 from \"@angular/material/form-field\";\nimport * as i10 from \"@angular/material/input\";\nimport * as i11 from \"@angular/material/button\";\nimport * as i12 from \"@angular/material/card\";\nimport * as i13 from \"@angular/material/expansion\";\nimport * as i14 from \"@angular/material/progress-spinner\";\nimport * as i15 from \"./products/products.component\";\nimport * as i16 from \"./custom-items/custom-items.component\";\nfunction CalcComponent_mat_error_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-error\");\n    i0.ɵɵtext(1, \" \\u042D\\u0442\\u043E \\u043F\\u043E\\u043B\\u0435 \");\n    i0.ɵɵelementStart(2, \"strong\");\n    i0.ɵɵtext(3, \"\\u043E\\u0431\\u044F\\u0437\\u0430\\u0442\\u0435\\u043B\\u044C\\u043D\\u043E\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction CalcComponent_mat_option_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-option\", 27);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const city_r14 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", city_r14);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", city_r14, \" \");\n  }\n}\nfunction CalcComponent_mat_error_18_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-error\");\n    i0.ɵɵtext(1, \" \\u042D\\u0442\\u043E \\u043F\\u043E\\u043B\\u0435 \");\n    i0.ɵɵelementStart(2, \"strong\");\n    i0.ɵɵtext(3, \"\\u043E\\u0431\\u044F\\u0437\\u0430\\u0442\\u0435\\u043B\\u044C\\u043D\\u043E\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction CalcComponent_mat_option_21_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-option\", 27);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const cityTo_r15 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", cityTo_r15);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", cityTo_r15, \" \");\n  }\n}\nfunction CalcComponent_div_29_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 28);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r6 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\"\", ctx_r6.pekAutoCost, \" \\u0440\\u0443\\u0431.\");\n  }\n}\nfunction CalcComponent_div_30_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 28);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r7 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\"\", ctx_r7.pekTime, \" \\u0434\\u043D.\");\n  }\n}\nfunction CalcComponent_div_31_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 29);\n    i0.ɵɵelement(1, \"mat-spinner\", 30);\n    i0.ɵɵelementEnd();\n  }\n}\nfunction CalcComponent_div_37_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 28);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r9 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r9.dlAutoCost, \" \\u0440\\u0443\\u0431.\");\n  }\n}\nfunction CalcComponent_div_38_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 28);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r10 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\"\", ctx_r10.dlTime, \" \\u0434\\u043D.\");\n  }\n}\nfunction CalcComponent_div_39_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 29);\n    i0.ɵɵelement(1, \"mat-spinner\", 30);\n    i0.ɵɵelementEnd();\n  }\n}\nfunction CalcComponent_mat_form_field_49_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r17 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"mat-form-field\", 31)(1, \"input\", 32);\n    i0.ɵɵlistener(\"ngModelChange\", function CalcComponent_mat_form_field_49_Template_input_ngModelChange_1_listener($event) {\n      i0.ɵɵrestoreView(_r17);\n      const ctx_r16 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r16.statedValue = $event);\n    });\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r12 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngModel\", ctx_r12.statedValue);\n  }\n}\nfunction CalcComponent_mat_card_53_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 35);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const error_r19 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(error_r19);\n  }\n}\nfunction CalcComponent_mat_card_53_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-card\", 33);\n    i0.ɵɵtemplate(1, CalcComponent_mat_card_53_div_1_Template, 2, 1, \"div\", 34);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r13 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r13.errors);\n  }\n}\nexport let CalcComponent = /*#__PURE__*/(() => {\n  class CalcComponent {\n    constructor(pekSrv, sdekSrv, formBuilder, ProductSrv) {\n      this.pekSrv = pekSrv;\n      this.sdekSrv = sdekSrv;\n      this.formBuilder = formBuilder;\n      this.ProductSrv = ProductSrv;\n      this.PEK = false;\n      this.SDEK = false;\n      this.pecCitiesTo = [];\n      this.pecCities = [];\n      this.sdekCities = [];\n      this.pecCitiesFrom = [];\n      this.sdekCitiesTo = [];\n      this.sdekCitiesFrom = [];\n      this.allCitiesTo = [];\n      this.allCitiesFrom = [];\n      this.citiesFromControl = new FormControl();\n      this.citiesToControl = new FormControl();\n      this.productsControl = new FormControl();\n      this.delivery = false; // Доставка по адресу\n      this.boxing = true; // Упаковка\n      this.insurance = false; // Страховка\n      this.statedValue = 0.0;\n      this.panelOpenState = false;\n      this.labelFromNot = ' не осуществляет доставку из этого города!';\n      this.labelToNot = ' не осуществляет доставку в этот город!';\n      this.errors = [];\n      this.pekSpin = false;\n      this.dlSpin = false;\n      this.getPekCities();\n      this.getSdekCities();\n    }\n    ngOnInit() {\n      this.citiesFromControl.setValue('Челябинск');\n      this.pecTo = this.sdekTo = this.labelToNot;\n      const timerId = setInterval(() => {\n        if (this.pecCitiesFrom.length && this.sdekCitiesFrom.length) {\n          // console.log(this.sdekCitiesFrom);\n          // console.log(this.pecCitiesFrom);\n          this.allCitiesFrom = this.sdekCitiesFrom.concat(this.pecCitiesFrom).filter(this.onlyUnique);\n          // console.log(this.allCitiesFrom);\n          this.allCitiesTo = this.sdekCitiesTo.concat(this.pecCitiesTo).filter(this.onlyUnique);\n          this.initCities();\n          this.pecFrom = this.findInPekCities('Челябинск');\n          this.sdekFrom = this.findInSdekCities('Челябинск');\n          clearInterval(timerId);\n        }\n      }, 500);\n      // this.products = ['Гаечный ключ', 'Баечный ключ2', 'Раечный ключ3', 'Фаечный ключ4', 'Гаечный ключ5'];\n      this.getProducts();\n    }\n    onFromChange(city) {\n      this.pecFrom = this.findInPekCities(city) ? this.findInPekCities(city) : undefined;\n      this.sdekFrom = this.findInSdekCities(city) ? this.findInSdekCities(city) : undefined;\n    }\n    onToChange(city) {\n      this.pecTo = this.findInPekCities(city) ? this.findInPekCities(city) : undefined;\n      this.sdekTo = this.findInSdekCities(city) ? this.findInSdekCities(city) : undefined;\n    }\n    findInPekCities(city) {\n      return this._filter(city.split(' ')[0], this.pecCitiesFrom)[0];\n    }\n    findInSdekCities(city) {\n      return this._filter(city.split(' ')[0], this.sdekCitiesFrom)[0];\n    }\n    _filter(value, cities) {\n      const filterValue = value.toLowerCase();\n      return cities.filter(option => option.toLowerCase().indexOf(filterValue) === 0).slice(0, 10);\n    }\n    getPekCities() {\n      this.pekSrv.getCities().subscribe(data => {\n        const cities = data[`cities`];\n        cities.map(x => {\n          this.pecCities[x[0]] = x[1];\n        });\n        this.pecCitiesFrom = cities.map(x => {\n          return x[0];\n        });\n        this.pecCitiesTo = cities.map(x => {\n          return x[0];\n        });\n      });\n    }\n    getSdekCities() {\n      this.sdekSrv.getCities().subscribe(data => {\n        const cities = data[`cities`];\n        cities.map(x => {\n          this.sdekCities[x[0]] = x[1];\n        });\n        this.sdekCitiesFrom = cities.map(x => {\n          return x[0];\n        });\n        this.sdekCitiesTo = cities.map(x => {\n          return x[0];\n        });\n        // console.log(this.sdekCities)\n      });\n    }\n\n    getProducts(q) {\n      this.ProductSrv.getProducts(q).subscribe(data => {\n        this.products = data.products;\n      });\n    }\n    initCities() {\n      this.citiesFrom = this.citiesFromControl.valueChanges.pipe(startWith('А'), map(value => this._filter(value, this.allCitiesFrom.sort())));\n      this.citiesTo = this.citiesToControl.valueChanges.pipe(startWith('А'), map(value => this._filter(value, this.allCitiesTo.sort())));\n      this.citiesFromControl.setValidators(Validators.required);\n      this.citiesToControl.setValidators(Validators.required);\n    }\n    validate() {\n      let validate = true;\n      if (!this.citiesToControl.valid) {\n        this.citiesToControl.markAsTouched({\n          onlySelf: true\n        });\n        validate = false;\n      }\n      if (!this.citiesFromControl.valid) {\n        this.citiesFromControl.markAsTouched({\n          onlySelf: true\n        });\n        validate = false;\n      }\n      return validate;\n    }\n    calculate() {\n      if (!this.validate()) {\n        return false;\n      }\n      this.pekCalculate();\n      this.dlCalculate();\n      this.generateErrors();\n    }\n    pekCalculate() {\n      // console.log(this.pecCities[this.pecFrom]);\n      // console.log(this.pecCities[this.pecTo]);\n      const take_town = this.pecCities[this.pecFrom];\n      const deliver_town = this.pecCities[this.pecTo];\n      // console.log(this.orderForm.get('items'));\n      // console.log(this.items);\n      if (!take_town || !deliver_town) {\n        return false;\n      }\n      const places = this.getPlaces();\n      const custom = this.getCustom();\n      // if (!places.length) return false;\n      this.pekSpin = true;\n      const data = {\n        take_town: take_town,\n        deliver_town: deliver_town,\n        places: places,\n        custom: custom,\n        delivery: this.delivery,\n        boxing: this.boxing,\n        insurance: this.insurance,\n        statedValue: this.statedValue\n      };\n      // tslint:disable-next-line:no-shadowed-variable\n      this.pekSrv.calculate(data).subscribe(data => {\n        // console.log(data);\n        this.pekResponse = data;\n        if (data[`error`]) {\n          // this.errors = this.errors.concat(data['error']\n          //   .map(e => {return 'ПЭК: ' + e['title'] + ' - ' [e['message']]}));\n          this.errors.push('ПЭК: ' + data[`error`].title + ' - ' + data[`error`].message);\n          this.pekAutoCost = '0';\n          this.pekTime = '0';\n        }\n        if (data[`transfers`]) {\n          this.pekAutoCost = data[`transfers`][0].costTotal;\n          this.pekTime = data[`commonTerms`][0].transporting[0];\n        }\n        this.pekSpin = false;\n      });\n    }\n    dlCalculate() {\n      const take_town = this.sdekCities[this.sdekFrom];\n      const deliver_town = this.sdekCities[this.sdekTo];\n      if (!take_town || !deliver_town) {\n        return false;\n      }\n      const places = this.getPlaces();\n      const custom = this.getCustom();\n      // if (!places.length) return false;\n      this.dlSpin = true;\n      const data = {\n        take_town: take_town,\n        deliver_town: deliver_town,\n        places: places,\n        custom: custom,\n        delivery: this.delivery,\n        boxing: this.boxing,\n        insurance: this.insurance,\n        statedValue: this.statedValue\n      };\n      this.sdekSrv.calculate(data).subscribe(data => {\n        console.log(data);\n        this.dlResponse = data;\n        if (data[`errors`]) {\n          this.errors = this.errors.concat(Object.values(data[`errors`]).map(e => 'Деловые Линии: ' + e));\n          this.dlAutoCost = '0';\n          this.dlTime = '0';\n        }\n        if (data[`price`]) {\n          this.dlAutoCost = data[`price`];\n          this.dlTime = data[`time`].value;\n        }\n        this.dlSpin = false;\n      });\n    }\n    getCustom() {\n      const custom = [];\n      if (this.customItems) {\n        for (let i = 0; i < this.customItems.length; i++) {\n          const element = this.customItems.value[i];\n          custom.push(element);\n        }\n      }\n      return custom;\n    }\n    getPlaces() {\n      const places = [];\n      if (this.items) {\n        for (let i = 0; i < this.items.length; i++) {\n          const element = this.items.value[i];\n          if (element.product) {\n            places.push(element);\n          }\n        }\n      }\n      return places;\n    }\n    onlyUnique(value, index, self) {\n      return self.indexOf(value) === index;\n    }\n    generateErrors() {\n      const pek = 'ПЭК';\n      const dl = 'Деловые Линии';\n      this.errors = [];\n      if (!this.pecFrom) {\n        this.errors.push(pek + this.labelFromNot);\n      }\n      if (!this.pecTo) {\n        this.errors.push(pek + this.labelToNot);\n      }\n      if (!this.sdekFrom) {\n        this.errors.push(dl + this.labelFromNot);\n      }\n      if (!this.sdekTo) {\n        this.errors.push(dl + this.labelToNot);\n      }\n      console.log(this.errors);\n    }\n    setItems(items) {\n      console.log(items);\n      this.items = items;\n    }\n    setCustomItems(customItems) {\n      console.log(customItems);\n      this.customItems = customItems;\n    }\n  }\n  CalcComponent.ɵfac = function CalcComponent_Factory(t) {\n    return new (t || CalcComponent)(i0.ɵɵdirectiveInject(i1.PekService), i0.ɵɵdirectiveInject(i2.SdekService), i0.ɵɵdirectiveInject(i3.FormBuilder), i0.ɵɵdirectiveInject(i4.ProductService));\n  };\n  CalcComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: CalcComponent,\n    selectors: [[\"app-calc\"]],\n    decls: 69,\n    vars: 30,\n    consts: [[1, \"calc-wrapper\"], [1, \"calc\"], [1, \"header\"], [1, \"body\"], [1, \"list\", \"options\"], [1, \"cities\"], [1, \"\"], [\"type\", \"text\", \"placeholder\", \"\\u041E\\u0442\\u043A\\u0443\\u0434\\u0430\", \"matInput\", \"\", \"required\", \"\", 3, \"formControl\", \"matAutocomplete\", \"input\"], [4, \"ngIf\"], [\"autoActiveFirstOption\", \"\", 3, \"optionSelected\"], [\"auto\", \"matAutocomplete\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [\"type\", \"text\", \"placeholder\", \"\\u041A\\u0443\\u0434\\u0430\", \"matInput\", \"\", \"required\", \"\", 3, \"formControl\", \"matAutocomplete\", \"input\"], [\"auto2\", \"matAutocomplete\"], [1, \"list\", \"result\"], [1, \"res\", \"pek\"], [\"class\", \"price\", 4, \"ngIf\"], [\"class\", \"spin\", 4, \"ngIf\"], [1, \"res\", \"dl\"], [3, \"products\", \"getProducts\", \"setItems\"], [3, \"setCustomItems\"], [1, \"actions\"], [1, \"\", 3, \"ngModel\", \"ngModelChange\"], [1, \"margin-left-30\", 3, \"ngModel\", \"ngModelChange\"], [\"class\", \"margin-left-30\", 4, \"ngIf\"], [\"mat-raised-button\", \"\", \"color\", \"accent\", 3, \"click\"], [\"class\", \"errors\", 4, \"ngIf\"], [3, \"value\"], [1, \"price\"], [1, \"spin\"], [\"diameter\", \"30\", \"color\", \"accent\"], [1, \"margin-left-30\"], [\"type\", \"number\", \"matInput\", \"\", \"placeholder\", \"\\u041E\\u0431\\u044A\\u044F\\u0432\\u043B\\u0435\\u043D\\u043D\\u0430\\u044F \\u0441\\u0442\\u043E\\u0438\\u043C\\u043E\\u0441\\u0442\\u044C\", 3, \"ngModel\", \"ngModelChange\"], [1, \"errors\"], [\"class\", \"error\", 4, \"ngFor\", \"ngForOf\"], [1, \"error\"]],\n    template: function CalcComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1);\n        i0.ɵɵelement(2, \"div\", 2);\n        i0.ɵɵelementStart(3, \"div\", 3)(4, \"mat-card\", 4)(5, \"div\", 2)(6, \"h2\");\n        i0.ɵɵtext(7, \"\\u041D\\u0430\\u043F\\u0440\\u0430\\u0432\\u043B\\u0435\\u043D\\u0438\\u0435\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(8, \"div\", 5)(9, \"mat-form-field\", 6)(10, \"input\", 7);\n        i0.ɵɵlistener(\"input\", function CalcComponent_Template_input_input_10_listener($event) {\n          return ctx.onFromChange($event.target.value);\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(11, CalcComponent_mat_error_11_Template, 4, 0, \"mat-error\", 8);\n        i0.ɵɵelementStart(12, \"mat-autocomplete\", 9, 10);\n        i0.ɵɵlistener(\"optionSelected\", function CalcComponent_Template_mat_autocomplete_optionSelected_12_listener($event) {\n          return ctx.onFromChange($event.option.value);\n        });\n        i0.ɵɵtemplate(14, CalcComponent_mat_option_14_Template, 2, 2, \"mat-option\", 11);\n        i0.ɵɵpipe(15, \"async\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(16, \"mat-form-field\", 6)(17, \"input\", 12);\n        i0.ɵɵlistener(\"input\", function CalcComponent_Template_input_input_17_listener($event) {\n          return ctx.onToChange($event.target.value);\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(18, CalcComponent_mat_error_18_Template, 4, 0, \"mat-error\", 8);\n        i0.ɵɵelementStart(19, \"mat-autocomplete\", 9, 13);\n        i0.ɵɵlistener(\"optionSelected\", function CalcComponent_Template_mat_autocomplete_optionSelected_19_listener($event) {\n          return ctx.onToChange($event.option.value);\n        });\n        i0.ɵɵtemplate(21, CalcComponent_mat_option_21_Template, 2, 2, \"mat-option\", 11);\n        i0.ɵɵpipe(22, \"async\");\n        i0.ɵɵelementEnd()()()();\n        i0.ɵɵelementStart(23, \"mat-card\", 14)(24, \"div\", 15)(25, \"div\")(26, \"b\");\n        i0.ɵɵtext(27, \"\\u041F\\u042D\\u041A:\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(28, \"hr\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(29, CalcComponent_div_29_Template, 2, 1, \"div\", 16);\n        i0.ɵɵtemplate(30, CalcComponent_div_30_Template, 2, 1, \"div\", 16);\n        i0.ɵɵtemplate(31, CalcComponent_div_31_Template, 2, 0, \"div\", 17);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(32, \"div\", 18)(33, \"div\")(34, \"b\");\n        i0.ɵɵtext(35, \"\\u0414\\u0435\\u043B\\u043E\\u0432\\u044B\\u0435 \\u041B\\u0438\\u043D\\u0438\\u0438:\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(36, \"hr\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(37, CalcComponent_div_37_Template, 2, 1, \"div\", 16);\n        i0.ɵɵtemplate(38, CalcComponent_div_38_Template, 2, 1, \"div\", 16);\n        i0.ɵɵtemplate(39, CalcComponent_div_39_Template, 2, 0, \"div\", 17);\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(40, \"app-products\", 19);\n        i0.ɵɵlistener(\"getProducts\", function CalcComponent_Template_app_products_getProducts_40_listener($event) {\n          return ctx.getProducts($event);\n        })(\"setItems\", function CalcComponent_Template_app_products_setItems_40_listener($event) {\n          return ctx.setItems($event);\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(41, \"app-custom-items\", 20);\n        i0.ɵɵlistener(\"setCustomItems\", function CalcComponent_Template_app_custom_items_setCustomItems_41_listener($event) {\n          return ctx.setCustomItems($event);\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(42, \"mat-card\", 21)(43, \"mat-checkbox\", 22);\n        i0.ɵɵlistener(\"ngModelChange\", function CalcComponent_Template_mat_checkbox_ngModelChange_43_listener($event) {\n          return ctx.delivery = $event;\n        });\n        i0.ɵɵtext(44, \"\\u0410\\u0434\\u0440\\u0435\\u0441\\u043D\\u0430\\u044F \\u0434\\u043E\\u0441\\u0442\\u0430\\u0432\\u043A\\u0430\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(45, \"mat-checkbox\", 23);\n        i0.ɵɵlistener(\"ngModelChange\", function CalcComponent_Template_mat_checkbox_ngModelChange_45_listener($event) {\n          return ctx.boxing = $event;\n        });\n        i0.ɵɵtext(46, \"\\u0423\\u043F\\u0430\\u043A\\u043E\\u0432\\u043A\\u0430\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(47, \"mat-checkbox\", 23);\n        i0.ɵɵlistener(\"ngModelChange\", function CalcComponent_Template_mat_checkbox_ngModelChange_47_listener($event) {\n          return ctx.insurance = $event;\n        });\n        i0.ɵɵtext(48, \"\\u0421\\u0442\\u0440\\u0430\\u0445\\u043E\\u0432\\u043A\\u0430\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(49, CalcComponent_mat_form_field_49_Template, 2, 1, \"mat-form-field\", 24);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(50, \"mat-card\", 21)(51, \"button\", 25);\n        i0.ɵɵlistener(\"click\", function CalcComponent_Template_button_click_51_listener() {\n          return ctx.calculate();\n        });\n        i0.ɵɵtext(52, \"\\u0420\\u0430\\u0441\\u0441\\u0447\\u0438\\u0442\\u0430\\u0442\\u044C\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵtemplate(53, CalcComponent_mat_card_53_Template, 2, 1, \"mat-card\", 26);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(54, \"mat-accordion\")(55, \"mat-expansion-panel\")(56, \"mat-expansion-panel-header\")(57, \"mat-panel-title\");\n        i0.ɵɵtext(58, \" \\u041F\\u042D\\u041A \");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(59, \"pre\");\n        i0.ɵɵtext(60);\n        i0.ɵɵpipe(61, \"json\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(62, \"mat-expansion-panel\")(63, \"mat-expansion-panel-header\")(64, \"mat-panel-title\");\n        i0.ɵɵtext(65, \" \\u0414\\u0435\\u043B\\u043E\\u0432\\u044B\\u0435 \\u041B\\u0438\\u043D\\u0438\\u0438 \");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(66, \"pre\");\n        i0.ɵɵtext(67);\n        i0.ɵɵpipe(68, \"json\");\n        i0.ɵɵelementEnd()()();\n      }\n      if (rf & 2) {\n        const _r1 = i0.ɵɵreference(13);\n        const _r4 = i0.ɵɵreference(20);\n        i0.ɵɵadvance(10);\n        i0.ɵɵproperty(\"formControl\", ctx.citiesFromControl)(\"matAutocomplete\", _r1);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.citiesFromControl.hasError(\"required\"));\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpipeBind1(15, 22, ctx.citiesFrom));\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"formControl\", ctx.citiesToControl)(\"matAutocomplete\", _r4);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.citiesToControl.hasError(\"required\"));\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpipeBind1(22, 24, ctx.citiesTo));\n        i0.ɵɵadvance(8);\n        i0.ɵɵproperty(\"ngIf\", ctx.pekAutoCost && !ctx.pekSpin);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.pekTime && !ctx.pekSpin);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.pekSpin);\n        i0.ɵɵadvance(6);\n        i0.ɵɵproperty(\"ngIf\", ctx.dlAutoCost && !ctx.dlSpin);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.dlTime && !ctx.dlSpin);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.dlSpin);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"products\", ctx.products);\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngModel\", ctx.delivery);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngModel\", ctx.boxing);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngModel\", ctx.insurance);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", ctx.insurance);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngIf\", ctx.errors.length);\n        i0.ɵɵadvance(7);\n        i0.ɵɵtextInterpolate1(\"        \", i0.ɵɵpipeBind1(61, 26, ctx.pekResponse), \"\\n      \");\n        i0.ɵɵadvance(7);\n        i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(68, 28, ctx.dlResponse));\n      }\n    },\n    dependencies: [i5.NgForOf, i5.NgIf, i3.DefaultValueAccessor, i3.NumberValueAccessor, i3.NgControlStatus, i3.RequiredValidator, i3.NgModel, i6.MatCheckbox, i7.MatAutocomplete, i8.MatOption, i7.MatAutocompleteTrigger, i9.MatFormField, i9.MatError, i10.MatInput, i3.FormControlDirective, i11.MatButton, i12.MatCard, i13.MatAccordion, i13.MatExpansionPanel, i13.MatExpansionPanelHeader, i13.MatExpansionPanelTitle, i14.MatProgressSpinner, i15.ProductsComponent, i16.CustomItemsComponent, i5.AsyncPipe, i5.JsonPipe],\n    styles: [\"form[_ngcontent-%COMP%]{width:100%;height:100%}.calc-wrapper[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;align-items:center;justify-content:center}.calc-wrapper[_ngcontent-%COMP%]   .calc[_ngcontent-%COMP%]{width:70%;display:flex;flex-direction:column;justify-content:center}@media (max-width: 1024px){.calc-wrapper[_ngcontent-%COMP%]   .calc[_ngcontent-%COMP%]{width:100%;flex-direction:column}}.calc-wrapper[_ngcontent-%COMP%]   .calc[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{display:flex}.calc-wrapper[_ngcontent-%COMP%]   .calc[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .company[_ngcontent-%COMP%]{padding:20px;margin-right:10px}.calc-wrapper[_ngcontent-%COMP%]   .calc[_ngcontent-%COMP%]   .body[_ngcontent-%COMP%]{display:flex}@media (max-width: 1024px){.calc-wrapper[_ngcontent-%COMP%]   .calc[_ngcontent-%COMP%]   .body[_ngcontent-%COMP%]{flex-direction:column}}.calc-wrapper[_ngcontent-%COMP%]   .calc[_ngcontent-%COMP%]   .body[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]{padding:30px}.calc-wrapper[_ngcontent-%COMP%]   .calc[_ngcontent-%COMP%]   .body[_ngcontent-%COMP%]   .list.options[_ngcontent-%COMP%]{width:70%}@media (max-width: 1024px){.calc-wrapper[_ngcontent-%COMP%]   .calc[_ngcontent-%COMP%]   .body[_ngcontent-%COMP%]   .list.options[_ngcontent-%COMP%]{width:100%}}.calc-wrapper[_ngcontent-%COMP%]   .calc[_ngcontent-%COMP%]   .body[_ngcontent-%COMP%]   .list.options[_ngcontent-%COMP%]   .cities[_ngcontent-%COMP%]{display:flex}.calc-wrapper[_ngcontent-%COMP%]   .calc[_ngcontent-%COMP%]   .body[_ngcontent-%COMP%]   .list.options[_ngcontent-%COMP%]   .cities[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:50%;padding-right:30px}.calc-wrapper[_ngcontent-%COMP%]   .calc[_ngcontent-%COMP%]   .body[_ngcontent-%COMP%]   .list.result[_ngcontent-%COMP%]{width:calc(30% - 20px);margin-left:20px;display:flex;flex-direction:column}.calc-wrapper[_ngcontent-%COMP%]   .calc[_ngcontent-%COMP%]   .body[_ngcontent-%COMP%]   .list.result[_ngcontent-%COMP%]   .res[_ngcontent-%COMP%]{height:50%}.calc-wrapper[_ngcontent-%COMP%]   .calc[_ngcontent-%COMP%]   .body[_ngcontent-%COMP%]   .list.result[_ngcontent-%COMP%]   .res[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{margin-top:5px}.calc-wrapper[_ngcontent-%COMP%]   .calc[_ngcontent-%COMP%]   .body[_ngcontent-%COMP%]   .list.result[_ngcontent-%COMP%]   .res[_ngcontent-%COMP%]   div.price[_ngcontent-%COMP%]{text-align:right;font-weight:600;color:#149461}.calc-wrapper[_ngcontent-%COMP%]   .calc[_ngcontent-%COMP%]   .body[_ngcontent-%COMP%]   .list.result[_ngcontent-%COMP%]   .res[_ngcontent-%COMP%]   div.spin[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-end}@media (max-width: 1024px){.calc-wrapper[_ngcontent-%COMP%]   .calc[_ngcontent-%COMP%]   .body[_ngcontent-%COMP%]   .list.result[_ngcontent-%COMP%]{width:100%;margin-left:0}}.calc-wrapper[_ngcontent-%COMP%]   .calc[_ngcontent-%COMP%]   .products[_ngcontent-%COMP%]{padding:30px;display:flex;margin-top:20px}.calc-wrapper[_ngcontent-%COMP%]   .calc[_ngcontent-%COMP%]   .products[_ngcontent-%COMP%]   .items[_ngcontent-%COMP%]{width:90%}.calc-wrapper[_ngcontent-%COMP%]   .calc[_ngcontent-%COMP%]   .products[_ngcontent-%COMP%]   .items[_ngcontent-%COMP%]   .flex[_ngcontent-%COMP%]{display:flex}.calc-wrapper[_ngcontent-%COMP%]   .calc[_ngcontent-%COMP%]   .products[_ngcontent-%COMP%]   .items[_ngcontent-%COMP%]   .flex[_ngcontent-%COMP%] > mat-form-field[_ngcontent-%COMP%]{flex-basis:40px;margin-right:20px}.calc-wrapper[_ngcontent-%COMP%]   .calc[_ngcontent-%COMP%]   .products[_ngcontent-%COMP%]   .items[_ngcontent-%COMP%]   .product[_ngcontent-%COMP%]{width:80%}.calc-wrapper[_ngcontent-%COMP%]   .calc[_ngcontent-%COMP%]   .products[_ngcontent-%COMP%]   .items[_ngcontent-%COMP%]   .quantity[_ngcontent-%COMP%]{width:9%;margin-left:1%}.calc-wrapper[_ngcontent-%COMP%]   .calc[_ngcontent-%COMP%]   .products[_ngcontent-%COMP%]   .tools[_ngcontent-%COMP%]{width:10%;display:flex;align-items:start;justify-content:center}.calc-wrapper[_ngcontent-%COMP%]   .calc[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{margin-top:20px}.calc-wrapper[_ngcontent-%COMP%]   .calc[_ngcontent-%COMP%]   .errors[_ngcontent-%COMP%]{margin-top:20px;color:#149461;display:flex;flex-direction:column}.mat-flat-button.mat-accent[_ngcontent-%COMP%], .mat-raised-button.mat-accent[_ngcontent-%COMP%], .mat-fab.mat-accent[_ngcontent-%COMP%], .mat-mini-fab.mat-accent[_ngcontent-%COMP%]{background-color:#149461}.margin-left-30[_ngcontent-%COMP%]{margin-left:30px}\"]\n  });\n  return CalcComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}